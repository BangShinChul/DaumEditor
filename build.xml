<?xml version="1.0"?>
<project name="DaumEditor" basedir="." default="buildall">
	<property file="build.properties" />

    <target name="buildall" description="">
		<antcall target="clean" />
		<antcall target="packaging" />
	</target>

    <target name="clean" description="remove all artifacts">
       <delete dir="${build.target.dir}" />
       <delete dir="${dist.dir}" />
   </target>

    <target name="packaging" description="build editor artifacts">
		<antcall target="build-pages" />
		<antcall target="build-css" />
		<antcall target="build-js" />
	</target>
	<!-- end of Main Targets -->


	<!-- build & packaging -->

    <target name="build-pages">
        <echo message="Building HTML... -------------------------------------------------" />
        <mkdir dir="${build.target.editor.pages.dir}" />
        <copy encoding="UTF-8" todir="${build.target.editor.pages.dir}" overwrite="true">
            <fileset dir="${src.editor.pages.dir}" />
        </copy>

		<mkdir dir="${build.target.web.dir}" />
		<copy encoding="UTF-8" todir="${build.target.web.dir}" overwrite="true">
			<fileset dir="${src.web.dir}">
                <include name="editor.html" />
            </fileset>
		</copy>
    </target>


	<target name="build-js">
		<echo message="Building JS... ---------------------------------------------------" />
        <mkdir dir="${build.target.editor.js.dir}" />
		<ant antfile="build_js.xml" target="merge_javascripts" />
		<ant antfile="build_js.xml" target="escape_and_delete_logging" />
		<ant antfile="build_js.xml" target="minify_javascripts" />
	</target>

	<target name="build-css">
		<echo message="Building CSS... --------------------------------------------------" />
		<mkdir dir="${build.target.editor.css.dir" />
		<ant antfile="build_css.xml" target="merge_editor_css" />
		<ant antfile="build_css.xml" target="merge_content_css" />
		<ant antfile="build_css.xml" target="minify_stylesheets" />
		<echo message="Building CSS [OK] ------------------------------------------------" />
	</target>

</project>
